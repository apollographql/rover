┌─────────────────────────────────────────────────────────────────┐
│                        ROVER COMMAND START                      │
└───────────────────────────────┬─────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                      Session::new(self) is called               │
└───────────────────────────────┬─────────────────────────────────┘
                                │
                                ▼
               ┌───────────────────────────────┐
               │ Is session creation successful?│
               └─────────────┬─────┬───────────┘
                             │     │
                          Yes│     │No
                             │     │
                             │     ▼
                             │   ┌─────────────────────────┐
                             │   │ Execute command without │
                             │   │      telemetry          │
                             │   └───────────┬─────────────┘
                             │               │
                             ▼               │
┌─────────────────────────────────────────┐  │
│ Spawn background thread for telemetry   │  │
│ using tokio::task::spawn                │  │
└─────────────────────┬───────────────────┘  │
                      │                       │
      ┌───────────────┴───────────────┐      │
      │                               │      │
      ▼                               ▼      │
┌──────────────────────┐    ┌──────────────────────────┐
│ Background Thread:   │    │ Main Thread:             │
│ - session.report()   │    │ - execute_command()      │
│ - Has 100ms timeout  │    │ - Run actual CLI command │
│   (REPORT_TIMEOUT)   │    │                          │
└──────────┬───────────┘    └────────────┬─────────────┘
           │                              │
           │                              │
           │                              │
           │                              ▼
           │               ┌─────────────────────────────────┐
           │               │     Command execution done      │
           │               └─────────────────┬───────────────┘
           │                                 │
           │                                 ▼
           │               ┌─────────────────────────────────┐
           │               │ Wait for telemetry to complete: │
           │               │   let _ = report_thread.await;  │
           │               └─────────────────┬───────────────┘
           │                                 │
           ▼                                 │
┌──────────────────────────┐                 │
│ Telemetry request either │                 │
│ - Completes successfully │                 │
│ - Times out (after 100ms)│                 │
│ - Fails with error       │                 │
└──────────┬───────────────┘                 │
           │                                 │
           └─────────────────────────────────┘
                           │
                           ▼
         ┌─────────────────────────────────────┐
         │        Return command result        │
         └─────────────────────────────────────┘